{"title":"Elasticsearch的介绍与安装","uid":"7e9c0ed522e9f463cbadca3b64226a03","slug":"Elasticsearch的介绍与安装","date":"2022-01-18T03:05:24.000Z","updated":"2023-03-01T07:02:08.636Z","comments":true,"path":"api/articles/Elasticsearch的介绍与安装.json","keywords":null,"cover":"/post/Elasticsearch的介绍与安装/cover.jpeg","content":"<p>Elasticsearch是一个分布式的开源搜索和分析引擎，适用于所有类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。Elasticsearch是在Lucene的基础上开发而成，由Elasticsearch N.V(即现在的Elastic)于2010年首次发布。Elasticsearch以其简单的<strong>REST风格的API</strong>、<strong>分布式特性</strong>、<strong>速度和可扩展性</strong>而闻名，是Elastic Stack的<strong>核心</strong>组件。</p>\n<hr>\n<h3 id=\"什么是ELK？\"><a href=\"#什么是ELK？\" class=\"headerlink\" title=\"什么是ELK？\"></a>什么是ELK？</h3><p>Elastic Stack通常被称为<strong>ELK Stack</strong>(代指<strong>Elasticsearch</strong>、<strong>LogStash</strong>和<strong>Kibana</strong>),Elastic Stack是适用于数据采集、充实、存储、分析和可视化的一组开源工具。目前Elastic Stack包括一系列丰富的轻量型数据采集代理，这些代理统称为<strong>Beats</strong>，可用来向<strong>Elasticsearch发送数据</strong>。</p>\n<h3 id=\"Lucene-vs-Solr-vs-Elasticsearch\"><a href=\"#Lucene-vs-Solr-vs-Elasticsearch\" class=\"headerlink\" title=\"Lucene vs Solr vs Elasticsearch\"></a>Lucene vs Solr vs Elasticsearch</h3><ul>\n<li>都使用<strong>倒排序索引</strong></li>\n<li>Lucene是一个<strong>类库</strong>，基于Java的全文搜索引擎。</li>\n<li>Solr基于Lucene构建的开源引擎，使用Java封装。</li>\n<li>ES基于Lucene,<strong>高扩展性</strong>，支持<strong>PB级别</strong>的搜索。</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>正排索引和倒排索引</p>\n<p>正排索引：<strong>文档ID作为索引</strong>，以<strong>文档内容作为记录</strong>。但是这样检索关键词的时候很费力，要一个文档一个文档的遍历一遍。</p>\n<p><img src=\"/post/Elasticsearch%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%89%E8%A3%85/v2-d50ffd4b3bc38e25e281fea9e07e14e6_1440w.jpg\" alt=\"正排索引\"></p>\n<p>倒排索引：将<strong>单词或记录作为索引</strong>，将<strong>文档ID作为记录</strong>，这样便可以方便地通过单词或记录查找到其所在的文档。</p>\n<p><img src=\"/post/Elasticsearch%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%89%E8%A3%85/v2-0e77a230cbce4cd3c8b8e121bb211518_1440w.jpg\" alt=\"倒排索引\"></p></blockquote>\n<h3 id=\"Elasticsearch安装\"><a href=\"#Elasticsearch安装\" class=\"headerlink\" title=\"Elasticsearch安装\"></a>Elasticsearch安装</h3><ol>\n<li><p>下载Elasticsearch(<a href=\"https://www.elastic.co/cn/downloads/elasticsearch\">点击进入Elasticsearch下载页</a>)，选择<strong>Linux版本</strong>下载。</p>\n</li>\n<li><p>上传到服务器，进入Elasticsearch的目录下</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">tar -zxvf elasticsearch-7.4.2-linux-x86_64.tar.gz -C &#x2F;usr&#x2F;local&#x2F;</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Elasticsearch的目录结构：</p>\n<p>bin：<strong>可执行文件</strong>包括elasticsearch启动节点、elasticsearch-plugin安装插件。</p>\n<p>config：<strong>配置文件</strong></p>\n<p>jdk: Elasticsearch依赖的Java环境</p>\n<p>lib：依赖的类库</p>\n<p>logs：日志文件</p>\n<p>modules：和ES有关的模块</p>\n<p>plugins: ES的自定义插件</p></blockquote>\n</li>\n<li><p>进入Elasticsearch的<strong>解压目录</strong>内，创建<strong>data</strong>文件夹</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cd &#x2F;usr&#x2F;local&#x2F;elasticsearch-7.4.2&#x2F;\nmkdir data</code></pre></li>\n<li><p>进入config目录进行配置，对<strong>elasticsearch.yml</strong>进行修改</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cd config&#x2F;\nvim elasticsearch.yml </code></pre></li>\n<li><p>配置<strong>cluster.name</strong>，cluster.name为ES集群名称</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cluster.name: joker-elasticsearch</code></pre></li>\n<li><p>配置<strong>node.name</strong>，node.name为当前ES节点名称</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">node.name: es-node1</code></pre></li>\n<li><p>配置<strong>path.data</strong>和<strong>path.logs</strong>，path.data为ES数据源路径，path.logs为ES的log日志路径</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># Path to directory where to store the data (separate multiple       locations by comma):\n#\npath.data: &#x2F;usr&#x2F;local&#x2F;elasticsearch-7.4.2&#x2F;data\n#\n# Path to log files:\n#\npath.logs: &#x2F;usr&#x2F;local&#x2F;elasticsearch-7.4.2&#x2F;logs</code></pre></li>\n<li><p>配置<strong>network.host</strong>，network.host为绑定ip地址</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># Set the bind address to a specific IP (IPv4 or IPv6):\nnetwork.host: 0.0.0.0</code></pre></li>\n<li><p>配置<strong>luster.initial_master_nodes</strong></p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cluster.initial_master_nodes: [&quot;es-node1&quot;]</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>修改jvm.options文件,可以配置ES的运行内存</p></blockquote>\n</li>\n<li><p>进入bin目录，启动Elasticsearch</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cd bin&#x2F;\n.&#x2F;elasticsearch -d</code></pre></li>\n</ol>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>在启动Elasticsearch的时候需注意一下几点：</p>\n<ol>\n<li><p>不能以root用户启动Elasticsearch，否则会报错。</p>\n</li>\n<li><p>启动Elasticsearch报错max virtual memory areas vm.max_map_count    [65530] is too low, increase to at least [262144],</p>\n<ul>\n<li>解决方案：修改sysctl.conf文件</li>\n</ul>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vim &#x2F;etc&#x2F;sysctl.conf</code></pre>\n\n<ul>\n<li>修改vm.max_map_count的内存大小</li>\n</ul>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vm.max_map_count&#x3D;262145</code></pre>\n\n<ul>\n<li>使用sysctl -p命令刷新配置</li>\n</ul>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">sysctl -p</code></pre></li>\n</ol></blockquote>\n<p>以上就是Elasticsearch的基本概念以及安装，不同版本可能有细微差别，如安装出现问题可参考官方文档解决。</p>\n","feature":true,"text":"Elasticsearch是一个分布式的开源搜索和分析引擎，适用于所有类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。Elasticsearch是在Lucene的基础上开发而成，由Elasticsearch N.V(即现在的Elastic)于2010年首次发布。Ela...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"ELK","slug":"ELK","count":3,"path":"api/categories/ELK.json"}],"tags":[{"name":"Elasticsearch","slug":"Elasticsearch","count":3,"path":"api/tags/Elasticsearch.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFELK%EF%BC%9F\"><span class=\"toc-text\">什么是ELK？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Lucene-vs-Solr-vs-Elasticsearch\"><span class=\"toc-text\">Lucene vs Solr vs Elasticsearch</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Elasticsearch%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">Elasticsearch安装</span></a></li></ol>","author":{"name":"张春博","slug":"blog-author","avatar":"/images/QD20000163.jpg","link":"/","description":"研发及交付中心<br>零售开发组<br>手机银行","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Hadoop搭建简易分布式集群","uid":"3e4c7b56240531255ad11affc0c50a94","slug":"Hadoop搭建简易分布式集群","date":"2022-05-31T07:14:45.000Z","updated":"2023-03-01T07:02:24.077Z","comments":true,"path":"api/articles/Hadoop搭建简易分布式集群.json","keywords":null,"cover":"/post/Hadoop搭建简易分布式集群/cover.jpeg","text":"使用三台机器创建Hadoop简易主从分布式集群，实现一个一主两从的Hadoop集群 Hadoop简易分布式集群搭建 1. 环境准备规划三个虚拟机节点：bd01、bd02、bd03 bd01 192.168.126.201 bd02 192.168.126.202 bd03 192...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"Hadoop","slug":"Hadoop","count":2,"path":"api/categories/Hadoop.json"}],"tags":[{"name":"Hadoop","slug":"Hadoop","count":2,"path":"api/tags/Hadoop.json"}],"author":{"name":"张春博","slug":"blog-author","avatar":"/images/QD20000163.jpg","link":"/","description":"研发及交付中心<br>零售开发组<br>手机银行","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"2022年2月工作周报","uid":"ccbe0f77992344761796fa060b30d50d","slug":"2022年2月工作周报","date":"2023-02-13T12:14:10.000Z","updated":"2023-03-01T06:58:43.321Z","comments":true,"path":"api/articles/2022年2月工作周报.json","keywords":null,"cover":"/post/2022年2月工作周报/cover.jpeg","text":"在日常的开发中，我们经常使用静态变量和静态方法，在java开发中大家经常遇到，那么在kotlin中应该如何使用静态方法和静态对象呢？ java中的静态方法public class JavaUtils &#123; public static int sum(int a,int b...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"工作","slug":"工作","count":3,"path":"api/categories/工作.json"}],"tags":[{"name":"工作日志","slug":"工作日志","count":3,"path":"api/tags/工作日志.json"}],"author":{"name":"张春博","slug":"blog-author","avatar":"/images/QD20000163.jpg","link":"/","description":"研发及交付中心<br>零售开发组<br>手机银行","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}